<ol itemscope itemtype="http://schema.org/BreadcrumbList">

  {% assign counter=0 %}

  {% for category in site.categories %}

      {% capture category_url %}{{ site.category_dir }}/{{ category | first | slugize | downcase | replace:' ','-' }}{% endcapture %}
      {% capture category_name %}{{ category | first}}{% endcapture %}

        {% for catpagename in page.categories %}
          {% if category_name == catpagename %}

          {% assign counter=counter | plus:1 %}
          
          <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
             <a itemprop="item" href="{{ site.url }}{{ append:'/' | append:category_url |  append:'/' }}">
               <span itemprop="name">{{ catpagename }}</span>
             </a>
            <meta itemprop="position" content="{{counter}}" />
          </li>

          {% endif %}
        {% endfor %}

   {% endfor %}

   {% assign counter=counter | plus:1 %}

  <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
     <a itemprop="item" href="{{ site.url }}{{ page.url }}">
       <span itemprop="name">{{ page.title }}</span>
     </a>
    <meta itemprop="position" content="{{counter}}" />
  </li>

</ol>

123

{% capture url %}{% if page.language%}{{ page.url | remove: "/" | remove: page.language }}{% else %}{{ page.url | remove: "/" }}{% endif %}{% endcapture %}
{% if url.size > 0 %}
  <nav class="breadcrumbs hidden-sm-down">

    <a class="breadcrumb-item" href={{ "/" | prepend: site.baseurl | prepend: site.url }}>Главная</a>

    <ol class="breadcrumb list-unstyled" vocab="http://schema.org/" typeof="BreadcrumbList">

    <!-- Iteration breadcrumb item -->
    {% assign position = 0 %}
    {% for crumb in breadcrumbs %}

      <!-- Skip if root -->
      {% if crumb.url == "/" %}
        {% continue %}
      {% endif %}

      <!-- Skip if language directory -->
      {% if page.language %}
        {% assign langpath = crumb.url | remove: "/" %}
        {% if langpath == page.language %}
          {% continue %}
        {% endif %}
      {% endif %}

      <!-- Get breadcrumb title. Insert snippet from configuration description to translates breadcrumb if language plugin is installed and YAML subset is set -->
      {% assign caption = crumb.title %}

      <!-- SEO data -->
      {% assign position = position  | plus: 1 %}
         
      <li class="breadcrumb-item{% if crumb.url == page.url %} active{% endif %}" property="itemListElement" typeof="ListItem">
        {% if crumb.url != page.url %}<a property="item" typeof="WebPage" href="{{ crumb.url | prepend: site.baseurl | prepend: site.url }}">{% endif %}
        <span property="name">{{ caption }}</span>
        {% if crumb.url != page.url %}</a>{% endif %}
        <meta property="position" content="{{ position }}" />
      </li>

    {% endfor %}

    </ol>

  </nav>
{% endif %}
